/* Reset/Normalize */
* {
   margin: 0;
   padding: 0;
   box-sizing: border-box;
}

/* Global Styles */
:root {
   font-size: 14px;  /* Base size for rem calculations */
}

body {
   font-family: Helvetica, Arial, sans-serif;
   font-size: 1rem;
   line-height: 1.6;
   color: #202122;
}

/* Container Positioning */
#dice-roller-container {
   position: fixed;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   z-index: 999;
   pointer-events: none;
}

/* Base styling */
#dice-applet {
   position: fixed;
   width: clamp(14rem, 20%, 16rem);
   aspect-ratio: 0.618;
   height: auto;
   top: 50%;
   left: 50%;
   transform: translate(-50%, -50%);
   background-color: #ffffff;
   box-shadow: 0 0.25rem 0.375rem rgba(0, 0, 0, 0.1);
   display: flex;
   flex-direction: column;
   justify-content: flex-start;
   z-index: 1000;
   pointer-events: auto;
   border-radius: 0.25rem;
   overflow: hidden;
   border: 1px solid #ccc;
   /* Safari support */
   -webkit-transform: translate(-50%, -50%);
}

/* Header styling */
.header {
   display: flex;
   justify-content: flex-end;
   padding: 0;
   cursor: move;
   background-color: #ffffff;
}

#close-applet {
   background: none;
   border: none;
   font-size: 1.25rem;
   cursor: pointer;
   color: #666;
   padding: 0 0.5rem;
   height: 1.65rem;
   display: flex;
   align-items: center;
}

/* Input field styling */
.input-row {
   width: 100%;
   padding: 0 0.5rem 0.5rem 0.5rem;
   position: relative;
   background-color: #f0f0f0;
}

#dice-input {
   width: calc(100% - 3rem);  /* Leave space for modifier */
   height: 2rem;
   border: none;
   background-color: #f0f0f0;
   color: #9ca3af;
   padding: 0.5rem;
   font-size: 1rem;
   outline: none;
   white-space: nowrap;
   overflow: hidden;
   text-overflow: ellipsis;
   border-radius: 0;
}

/* Show placeholder when empty */
#dice-input:empty:before {
   content: attr(placeholder);
   color: #D1D5DB;
}

/* Dice buttons layout */
.dice-control-table {
   padding: 1rem;
   display: flex;
   flex-direction: column;
   gap: 1rem;
}

.dice-buttons {
   display: grid;
   grid-template-columns: repeat(3, 1fr);
   gap: 1rem;
   justify-items: center;
   align-items: center;
   min-height: 4.5rem;
}

.die-button {
   width: 3rem;  /* 48px at our root size - meets touch target guidelines */
   height: 3rem;
   padding: 0.25rem;
   border: none;
   background: #ffffff;
   cursor: pointer;
   display: flex;
   justify-content: center;
   align-items: center;
}

.die-button img {
   width: auto;
   height: auto;
   object-fit: contain;
}

/* Specific die size adjustments with exact proportions */
.die-button[data-die="d4"] img {
   width: calc(2.5rem * 1.15);  /* 115% of base size */
   height: calc(2.5rem * 1.15 * 48/56);  /* Maintain 56:48 ratio at 115% size */
   transform-origin: center 66%;  /* Place rotation point 34% up from bottom */
   position: relative;
   top: -0.25rem;  /* Move up slightly */
}

.die-button[data-die="d6"] img {
   width: calc(2.5rem * 0.8);  /* Increase to 80% of base size */
   height: calc(2.5rem * 0.8);  /* Square 1:1 ratio at 80% size */
}

.die-button[data-die="d8"] img {
   width: 2.5rem;  /* ~40px - scaled from 52px original */
   height: calc(2.5rem * 58/52);  /* Maintain 52:58 ratio */
}

.die-button[data-die="d10"] img {
   width: calc(2.5rem * 1.1);  /* ~44px - scaled from 65px original, with 10% increase */
   height: calc(2.5rem * 1.1 * 57/65);  /* Maintain 65:57 ratio with 10% increase */
}

.die-button[data-die="d12"] img {
   width: 2.5rem;  /* ~40px - scaled from 56px original */
   height: calc(2.5rem * 59/56);  /* Maintain 56:59 ratio */
}

.die-button[data-die="d20"] img {
   width: 2.5rem;  /* ~40px - scaled from 55px original */
   height: calc(2.5rem * 62/55);  /* Maintain 55:62 ratio */
}

.die-button:focus,
#roll-button:focus,
#clear-button:focus,
#modify-button-increase:focus,
#modify-button-decrease:focus {
 outline: none;
}

/* Control row styling */
.control-row {
   display: grid;
   grid-template-columns: repeat(3, 1fr);
   gap: 0.75rem;
   justify-items: center;
   align-items: center;
   min-height: 4.5rem;  /* Match dice-buttons height */
}

#clear-button,
#roll-button {
   width: 3rem;
   height: 3rem;
   padding: 0.25rem;
   border: none;
   background: none;
   cursor: pointer;
   display: flex;
   justify-content: center;
   align-items: center;
}

/* Modifier container */
.modify-button-container {
   display: flex;
   flex-direction: column;
   height: 3rem;  /* Increased from 2.5rem to match other buttons */
   width: 3rem;
   gap: 0;
   position: relative;
}

/* Modifier display for inline usage in results */
.modifier-display {
   color: #000000; /* Keep color black */
   font-weight: bold;
   display: inline;
}

/* Modifier overlay element inside the container */
#modifier-overlay {
   position: absolute;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   display: flex;
   align-items: center;
   justify-content: center;
   font-weight: bold;
   color: #000000; /* Keep color black */
   pointer-events: none;
   z-index: 1; /* Ensure it hovers above the buttons */
   user-select: none; /* Make it unselectable */
}

/* Results field styling */
.results-field {
   position: relative;
   flex: 1;  /* Take up remaining space */
   background-color: #f0f0f0;
   display: flex;
   overflow: visible;
   border: none;
}

.results-left {
   width: 35%;  /* Reduced from 40% */
   text-align: center;
   padding: 0.5rem 0.75rem;
   background-color: #f0f0f0;
   overflow-y: auto;  /* Allow scrolling */
}

.results-right {
   position: relative;
   width: 65%;
   text-align: left;
   padding: 0.7rem 0.75rem 0.5rem 0.75rem;  /* Reduce top padding from 0.75rem to 0.6rem */
   overflow-y: auto;
   background-color: #f0f0f0;
   z-index: 1;
}

/* Results grid layout */
#results-rolls {
   display: grid;
   grid-template-columns: repeat(5, 1.25rem);  /* Changed from 4 to 5 columns */
   gap: 0.25rem;
   font-size: 1rem;
   line-height: 1.2;
   justify-content: start;
   margin-right: 1.25rem;  /* Reduced margin since we have more columns */
}

.result-number {
   display: flex;
   justify-content: center;
   align-items: center;
   width: 1.25rem;  /* Fixed width */
   height: 1.5rem;
   background-color: #f0f0f0;  /* Match parent background */
   border-radius: 0.125rem;
   overflow: hidden;  /* Prevent text from expanding cell */
   font-size: 1.15rem;  /* Increased from default 1rem */
}

/* Die-specific colors for results */
.result-d4 {
   color: #19a34a;
}

.result-d6 {
   color: #0985b4;
}

.result-d8 {
   color: #7f54a2;
}

.result-d10 {
   color: #af206d;
}

.result-d12 {
   color: #d42027;
}

.result-d20 {
   color: #f05223;
}

/* Override modifier display for results */
.results-right .modifier-display {
   position: absolute;
   right: 0.75rem;
   top: 0.6rem;  /* Match new top padding */
   color: #000000;
   display: flex;
   justify-content: center;
   align-items: center;
   width: 1.25rem;
   height: 1.5rem;
   overflow: hidden;
   font-size: 1.15rem;  /* Match result-number font size */
}

/* Red text for modifiers in input field */
#dice-input .modifier-display {
   position: absolute;
   right: 0.75rem;  /* Match the results area padding */
   top: 50%;
   transform: translateY(-50%);
   color: #000000;
   font-weight: bold;
}

/* Resize handle */
.resize-handle {
   position: static;
   height: 0;  /* Remove height */
   background-color: #f0f0f0;
   cursor: ns-resize;
   padding: 0;
}

#modify-button-increase,
#modify-button-decrease {
   width: 100%;
   height: 1.5rem;  /* Half of the 3rem container height */
   padding: 0;
   border: none;
   background: none;
   cursor: pointer;
   display: flex;
   justify-content: center;
   align-items: center;
}

#clear-button img,
#roll-button img,
#modify-button-increase img,
#modify-button-decrease img {
   width: 100%;
   height: 100%;
   object-fit: contain;
}
